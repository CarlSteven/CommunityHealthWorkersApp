<ion-view title="Available Classes">
<ion-nav-buttons side='primary'>
    <button class="button button-dark" ng-click="updateTasks(true)"><i class="icon ion-refresh"></i></button>
    <button class="button button-dark" ng-show="isAdm || isMod" ng-click="(query.finished == 1) ? query.finished = 0: query.finished = 1;"> <i class="icon ion-ios-checkmark-outline"> </i> </button>
</ion-nav-buttons>
<ion-header-bar align-title="left" class="bar-dark bar-subheader">
    <div class="bar bar-header item-input-inset">
        <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input ng-init="query = {finished: 0, active:1};" ng-model="query.name" type="search" placeholder="Filter">
        </label>
        <button class="button button-button-icon ion-more" ng-click="openfilterPopover($event)"> Filter</button>
    </div>
    <isteven-multi-select
            input-model="badgeMultiSelect"    
            output-model="output"
            button-label="Cores"
            item-label="icon name maker"
            tick-property="ticked"
            orientation="horizontal"
            helper-elements="all,none"
            max-labels="0" style="right:0px; position:absolute">
    </isteven-multi-select>
</ion-header-bar>
<ion-content>
    <div class="item" ng-show="query.finished == 0 && !(tasks.length == 0 || tasks === undefined) && (isAdm || isMod)">Showing upcoming classes.</div>
    <div class="item" ng-show="query.finished == 1 && !(tasks.length == 0 || tasks === undefined) && (isAdm || isMod)">Showing past classes.</div>
    <div class="list card my-item" ng-repeat="task in tasks | orderBy: 'time' | filter: query | selectCores: indexCoresInput track by $index">
        <div class="item item-avatar item-icon-right" ng-click="viewTask(task.id)">
            <img src="img/classes-icon.png" width="60" height="50"/>
            <h2> {{task.name}} </h2>
            <p>Location: {{task.group.name}}</p>
            <p ng-show="task.time">Date: {{task.time | date:'MM/dd/yyyy @ h:mma'}}</p>
            <p ng-show="!task.time">{{task.datetime}}</p>
        </div>
        <div class="item tabs tabs-secondary tabs-icon-left">
            <a class="tab-item" ng-click="viewTask(task.id)">
                <i class="icon ion-ios7-location"></i>
                Info
            </a>
            <a class="tab-item" ng-click="joinTask(task.id)" ng-show="!isGuest && !task.isMember">
                <i class="icon ion-ios7-people"></i>
                Add to Wish List
            </a>
            <a class="tab-item" ng-click="leaveTask(task.id)" ng-show="task.isMember">
                <i class="icon ion-ios7-people"></i>
                Remove from Wish List
            </a>
            <a class="tab-item" ng-show="actionCount(task.id)" ng-click="showActions(task.id, $event)">
                <i class="icon ion-ios7-more"></i>
            </a>
        </div>
    </div>
</ion-content>
</ion-view>
